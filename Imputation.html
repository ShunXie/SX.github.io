<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Imputation</title>

<script src="site_libs/header-attrs-2.16/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="about.html">About</a>
</li>
<li>
  <a href="dashboard.html">Dashboard</a>
</li>
<li>
  <a href="mailto:&lt;you@youremail.com&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="http://github.com/&lt;YOUR_GH_NAME&gt;/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Imputation</h1>

</div>


<div id="background-information-of-the-datasets" class="section level1">
<h1>Background Information of the datasets</h1>
<p><br> <br></p>
<div id="life-expectancy-dataset" class="section level3">
<h3>Life Expectancy Dataset</h3>
<p>We choose WHO Life Expectancy Dataset as our main dataset in our
study. The code is read as following:</p>
<pre class="r"><code>suppressMessages(library(tidyverse))
suppressMessages(library(dbplyr))
options(tibble.print_min = 5)

#Get life expectancy data
LifeExpectancy = read_csv(&quot;data/who_life_exp.csv&quot;,col_types = cols(.default = col_guess())) %&gt;% 
  janitor::clean_names()</code></pre>
<p>Life expectancy datasets contains a total of <code>183</code>
countries with year ranging from <code>2000</code> to <code>2016</code>.
There are a total of <code>32</code> variables. Out of which, we
consider the main</p>
<p>*<code>country</code>: country name</p>
<p>*<code>country_code</code>: Three letter of the country id</p>
<p>*<code>region</code>: The region of the country</p>
<p>*<code>year</code>: year of all values stored</p>
<p>*<code>adult_mortality</code>: Adult Mortality Rates of both sexes
(probability of dying between 15 and 60 years per 1000 population)</p>
<p>*<code>infant_mort</code>: Death rate up to age 1</p>
<p>*<code>age1_4mort</code>: Death rate between ages 1 and 4</p>
<p>*<code>alcohol</code>: Alcohol, recorded per capita (15+) consumption
(in litres of pure alcohol)</p>
<p>*<code>bmi</code>: Mean BMI (kg/<span
class="math inline">\(m^2\)</span>) (18+) (age-standardized
estimate)</p>
<p>*<code>hepatitis</code>: Hepatitis B (HepB) immunization coverage
among 1-year-olds (%)</p>
<p>*<code>measles</code>: Measles-containing-vaccine first-dose (MCV1)
immunization coverage among 1-year-olds (%)</p>
<p>*<code>polio</code>: Polio (Pol3) immunization coverage among
1-year-olds (%)</p>
<p>*<code>diphtheria</code>: Diphtheria tetanus toxoid and pertussis
(DTP3) immunization coverage among 1-year-olds (%)</p>
<p>*<code>hospitals</code>: Total density per 100 000 population:
Hospitals</p>
<p>*<code>une_life</code>: (Our response variable) Life expectancy at
birth, total (years)</p>
<p>*<code>une_gni</code>: GNI per capita, PPP (current international
$)</p>
<p><br> <br></p>
</div>
<div id="country-code-dataset" class="section level3">
<h3>Country Code Dataset</h3>
<p>Country code dataset contains the status of countries, such as the
information of the independence status and its capital city. We include
the variable specifies whether the country is a developed or developing
country. The data is read in the following code and is merged by the
code.</p>
<pre class="r"><code>country_code = 
  read_csv(&quot;data/country-codes.csv&quot;, show_col_types = FALSE) %&gt;% 
  select(`ISO3166-1-Alpha-3`, `Developed / Developing Countries`)



merged_data_PM = merge(LifeExpectancy, country_code, by.x = &quot;country_code&quot;, by.y = &quot;ISO3166-1-Alpha-3&quot; )</code></pre>
<p><br> <br></p>
</div>
<div id="pm2.5-dataset" class="section level3">
<h3>PM2.5 dataset</h3>
<p>PM2.5 dataset is a dataset that specifies the percentage of total
population exposed to levels exceeding WHO guideline value. Such value
exists over year 1960 to 2021 but most of the value before 2010 and
after 2017 are missing.The following code read and clean the
dataset.</p>
<p>merge the data with dataset contain pm 2.5 information:</p>
<pre class="r"><code>#read pm2.5 data
PM_dataset = 
  read_csv(&quot;data/pm2.5.csv&quot;, show_col_types = FALSE, skip = 4) 

PM_dataset_clean = 
  PM_dataset %&gt;% 
  janitor::clean_names() %&gt;% 
  select(-(x1960:x1999),-(x2017:x2021)) %&gt;% 
  pivot_longer(
    x2000:x2016,
    names_to = &quot;year&quot;,
    names_prefix = &quot;x&quot;,
    values_to = &quot;PM_value&quot;
  ) %&gt;% 
  select(country_code, year, PM_value) %&gt;% 
  mutate(year = as.numeric(year))</code></pre>
<p>The following code is used to merge with all dataset.</p>
<pre class="r"><code>#merged data with developed/ developing countries
merged_data_d = 
  merged_data_PM %&gt;% 
  left_join(PM_dataset_clean, by = c(&quot;country_code&quot;,&quot;year&quot;))</code></pre>
<p><br> <br></p>
</div>
<div id="income-level-data" class="section level3">
<h3>Income level data</h3>
<p>Income level data is a dataset specifies the income status. It is a
factor variable with four levels, namely high income, low income, lower
middle income and upper middle income. The dataset is cleaned and merged
in the following code.</p>
<pre class="r"><code>#read income level data
Income_dataset = read_csv(&quot;data/income_level.csv&quot;, show_col_types = FALSE) %&gt;% 
  janitor::clean_names() %&gt;% 
  select(country_code,income_group)

#merged data with income level
merged_data_i = merged_data_d %&gt;% 
  left_join( Income_dataset, by = c(&quot;country_code&quot;)) %&gt;% 
  select(country_code:une_school,PM_value,income_group,`Developed / Developing Countries`)</code></pre>
<p><br> <br></p>
</div>
<div id="health-expenditure" class="section level3">
<h3>Health expenditure</h3>
<p>Health expenditure dataset measures the health expenditure from
government with respect to different countries. The dataset is measured
in percentage of GDP or dollar value per capita. We choose percentage of
GDP as our unit because the dataset measured in percentage of GDP has
more complete values. Here is the coding for read, clean and merge the
Health expenditure dataset to original dataset.</p>
<pre class="r"><code>health_exp = read_csv(&quot;data/government_compulsory_health expenditure_from_1970_2020.csv&quot;) %&gt;% 
  janitor::clean_names() %&gt;% 
  filter(measure==&quot;PC_GDP&quot;) %&gt;%
  filter(subject==&quot;TOT&quot;) %&gt;% 
  mutate(&quot;country_code&quot;=location,
         &quot;year&quot; = time) %&gt;% 
  select(country_code,year, value)

merged_data_h = 
  merged_data_i %&gt;% 
  left_join(health_exp, by = c(&quot;country_code&quot;,&quot;year&quot;)) %&gt;% 
  mutate(&quot;health_exp&quot; = value) %&gt;% 
  select(country_code:une_school,PM_value,income_group,health_exp,`Developed / Developing Countries`)</code></pre>
<p><br> <br></p>
</div>
<div id="parliament-information" class="section level3">
<h3>Parliament Information</h3>
<p>Parliament information data is a dataset that measured the percentage
of women in parliament over different years for different countries. The
following code cleans and merge the data:</p>
<pre class="r"><code>women_in_parliament &lt;-
  read_csv(&quot;data/around_2019_women_percent_in_national_parliaments.csv&quot;, skip = 5) %&gt;% 
  janitor::clean_names() %&gt;% 
  select(x2, elections_3, percent_w_6) %&gt;% 
  separate(elections_3, into = c(&quot;month&quot;, &quot;year&quot;)) %&gt;% 
  mutate(&quot;country&quot; = x2,
         &quot;percent_w_in_lower_house&quot; = percent_w_6,
         &quot;year&quot; = as.double(year)) %&gt;% 
  select(country, year, percent_w_in_lower_house)</code></pre>
<pre><code>## New names:
## Rows: 193 Columns: 10
## ── Column specification
## ──────────────────────────────────────────────────────── Delimiter: &quot;,&quot; chr
## (7): ...1, ...2, Elections...3, Elections...7, Seats*...8, Women...9, % ... dbl
## (3): Seats*...4, Women...5, % W...6
## ℹ Use `spec()` to retrieve the full column specification for this data. ℹ
## Specify the column types or set `show_col_types = FALSE` to quiet this message.
## • `` -&gt; `...1`
## • `` -&gt; `...2`
## • `Elections` -&gt; `Elections...3`
## • `Seats*` -&gt; `Seats*...4`
## • `Women` -&gt; `Women...5`
## • `% W` -&gt; `% W...6`
## • `Elections` -&gt; `Elections...7`
## • `Seats*` -&gt; `Seats*...8`
## • `Women` -&gt; `Women...9`
## • `% W` -&gt; `% W...10`</code></pre>
<pre class="r"><code>merged_data = 
  merged_data_h %&gt;% 
  left_join(women_in_parliament, by = c(&quot;country&quot;,&quot;year&quot;)) %&gt;% 
  select(country_code:une_school,PM_value,income_group,health_exp,`Developed / Developing Countries`, percent_w_in_lower_house)</code></pre>
<p>Store the data</p>
<pre class="r"><code>write.csv(merged_data , file = &quot;data/Merged_expectation.csv&quot;)</code></pre>
</div>
</div>
<div id="impute" class="section level1">
<h1>Impute</h1>
<pre class="r"><code>raw_mat = 
  merged_data %&gt;% 
  select(-country, -country_code, -region,-income_group, -`Developed / Developing Countries`) %&gt;% 
  as.matrix()

imputed_mat = filling::fill.KNNimpute(raw_mat, k = 2)</code></pre>
<pre class="r"><code>#colnames_exp = colnames(LifeExpectancy)
Imputed_expectancy = merged_data
for (i in 1:(length(merged_data)-5)) {
  Imputed_expectancy[i+3][[1]] = imputed_mat[[1]][,i]
}
head(Imputed_expectancy)

write.csv(Imputed_expectancy , file = &quot;data/Imputed_expectation.csv&quot;)</code></pre>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
